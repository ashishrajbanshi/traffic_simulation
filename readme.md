# ğŸ›‘ Traffic Intersection Simulation with SUMO

Simulate a four-way traffic intersection using SUMO and TraCI with Python. This project models vehicle movement, traffic light control, accumulation of queue lengths, and produces analytics.

## ğŸ“ Project Structure

```
.
â”œâ”€â”€ network/
â”‚   â”œâ”€â”€ intersection.edg.xml       # Edges (roads) between nodes
â”‚   â”œâ”€â”€ intersection.nod.xml       # Junction and node definitions
â”‚   â”œâ”€â”€ intersection.net.xml       # Generated network file (via netconvert)
â”‚   â”œâ”€â”€ intersection.rou.xml       # Vehicle routes and definitions
â”‚   â””â”€â”€ intersection.sumocfg       # SUMO config linking network and routes
â”œâ”€â”€ simple_net/                    # Intermediate netconvert input files
â”‚   â”œâ”€â”€ intersection.edg.xml
â”‚   â”œâ”€â”€ intersection.nod.xml
â”‚   â””â”€â”€ intersection.net.xml       # Output from netconvert
â”œâ”€â”€ traffic_sim.py                # Python script running SUMO via traci
â”œâ”€â”€ intersection_stats.csv        # (Output) Collected vehicle statistics
â””â”€â”€ queue_plot.png                # (Output) Plot showing queue length over time
```

## âš™ï¸ File Descriptions

### 1. `network/intersection.edg.xml` & `.nod.xml`
- Define the **structure** of the intersection: nodes A, B, C, D, and central junction J.
- Edges link outer nodes to the junction and vice versa.

### 2. `network/intersection.net.xml`
- Generated by `netconvert` from `.edg.xml` and `.nod.xml`.
- Contains internal lanes, junction definitions, traffic light logic, and allowable turns.

### 3. `network/intersection.rou.xml`
- Declares a vehicle type (`car`) and four routes:
  - `north_south`, `south_north`, `east_west`, `west_east`
- Spawns vehicles (`veh0` to `veh3`) at different departure times (0, 2, 4, 6 seconds).

### 4. `network/intersection.sumocfg`
- Configuration file for SUMO specifying paths to `.net.xml` and `.rou.xml`.

## ğŸ“ `traffic_sim.py`

Python script tying everything together using `traci`:

- âœ… **Simulation**:
  - Launches SUMO with `intersection.sumocfg`.
  - Runs until no active vehicles remain.
  - Every step:
    - Advances sim (`traci.simulationStep()`).
    - Alternates traffic light phases every 50 steps.
    - Captures vehicle ID, speed, position, waiting time, current edge.
    - Records data into a list of dicts.

- âœ… **Output Generation**:
  - Data is converted into a DataFrame.
  - Saved as **`intersection_stats.csv`**.
  - Detects stopped vehicles (speed < 0.1) and counts queue length per step.
  - Produces **`queue_plot.png`** visualizing queue length over time.

## ğŸ“Š Outputs Explained

### `intersection_stats.csv`
Columns:

| step | vehicle | speed | x     | y     | wait_time | edge   |
|------|---------|-------|--------|--------|-----------|--------|

- Every row corresponds to one vehicle at one simulation step.
- Used for custom analysis.

### `queue_plot.png`
- X-axis: Simulation steps.
- Y-axis: Number of stopped vehicles (queue length).
- Provides visual insight into congestion build-up and dissipation.

## ğŸ›  Getting Started

1. **Requirements**:
   - Python 3.x
   - SUMO installed, and `sumo` CLI available
   - Python dependencies:
     ```
     pip install pandas matplotlib sumolib traci
     ```

2. **Generate network** (optional):
   ```bash
   netconvert      --node-files network/intersection.nod.xml      --edge-files network/intersection.edg.xml      --output-file network/intersection.net.xml
   ```

3. **Run simulation**:
   ```bash
   python traffic_sim.py
   ```

4. **Inspect outputs**:
   - `intersection_stats.csv` â€“ raw vehicle data.
   - `queue_plot.png` â€“ visual queue analysis.

## ğŸ§  Extending the Project

- **Traffic light logic**: Replace static phase control with dynamic or actuated logic in XML or via `traci.trafficlight`.
- **More vehicles/routes**: Add vehicle entries in `.rou.xml`.
- **Performance metrics**: Analyze average wait, travel times, speed distributions.
- **Shift to GUI**: Use SUMO-GUI for visualization by launching with `sumo-gui`.

## âœ… Summary

This project sets up a simple SUMO-based simulation of a four-way intersection, controlled via Python and TraCI. It gathers detailed movement data and computes queue lengths, producing both a CSV and a matplotlib plot for post-run analysis.